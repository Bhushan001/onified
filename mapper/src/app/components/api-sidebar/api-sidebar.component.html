<div class="api-sidebar">
  <div class="sidebar-header">
    <h3>Nodes</h3>
    <p class="subtitle">Drag to canvas to add</p>
    
    <!-- Search Bar -->
    <div class="search-container">
      <div class="search-input-wrapper">
        <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
        </svg>
        <input 
          type="text" 
          [(ngModel)]="searchQuery"
          (input)="onSearchChange()"
          placeholder="Search nodes..."
          class="search-input"
        >
        <button 
          *ngIf="searchQuery" 
          class="clear-search"
          (click)="clearSearch()"
        >
          <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <div class="api-list" *ngIf="!isLoading">
    <!-- No Results -->
    <div *ngIf="filteredApiConfigurations.length === 0" class="no-results">
      <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
        <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
      </svg>
      <p>No nodes found</p>
      <small>Try a different search term</small>
    </div>

    <!-- API Items -->
    <div 
      *ngFor="let api of filteredApiConfigurations"
      class="api-item"
      [class.trigger-node]="api.category === 'Trigger'"
      [class.dragging]="draggedItem === api"
      draggable="true"
      (dragstart)="onDragStart($event, api)"
      (dragend)="onDragEnd($event)"
      [style.border-left-color]="api.color"
    >
      <div class="api-icon" [style.background-color]="api.color">{{ api.icon }}</div>
      <div class="api-info">
        <h4>{{ api.api_name | titlecase }}</h4>
        <p class="api-description">{{ api.description }}</p>
        <div class="api-meta">
          <span class="api-category" [style.background-color]="api.color">{{ api.category }}</span>
          <span class="api-methods" *ngIf="api.category !== 'Trigger'">{{ api.supportedMethods?.length }} methods</span>
        </div>
      </div>
      <div class="drag-handle">⋮⋮</div>
    </div>
  </div>

  <div class="loading-state" *ngIf="isLoading">
    <div class="loading-spinner"></div>
    <p>Loading nodes...</p>
  </div>
</div>