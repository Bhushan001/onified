<div 
  class="node"
  [class.selected]="node.isSelected"
  [class.configured]="node.isConfigured"
  [class.trigger-node]="isTriggerNode()"
  [style]="getNodeStyle()"
  [style.border-left-color]="getApiColor()"
  (mousedown)="onMouseDown($event)"
  (click)="onSingleClick($event)"
  (dblclick)="onDoubleClick($event)"
  (contextmenu)="onContextMenu($event)"
>
  <!-- Node Header -->
  <div class="node-header">
    <div class="node-icon" [style.background-color]="getApiColor()">{{ getApiIcon() }}</div>
    <div class="node-title">
      <h4>{{ getDisplayName() | titlecase }}</h4>
      <span class="node-type">{{ isTriggerNode() ? 'Trigger' : node.type }}</span>
    </div>
    <button 
      class="delete-btn"
      (click)="onDeleteClick($event)"
      title="Delete Node"
    >
      ×
    </button>
  </div>

  <!-- Node Status -->
  <div class="node-status">
    <div class="status-indicator" [class.configured]="node.isConfigured">
      <span *ngIf="node.isConfigured">✓</span>
      <span *ngIf="!node.isConfigured">⚠</span>
    </div>
    <span class="status-text">
      {{ node.isConfigured ? 'Configured' : (isTriggerNode() ? 'Ready to trigger' : 'Needs Configuration') }}
    </span>
  </div>

  <!-- Connection Points -->
  <div class="connection-points">
    <div 
      *ngFor="let port of node.ports"
      class="connection-point"
      [class]="port.type"
      [title]="port.label"
    ></div>
  </div>

  <!-- Selection Indicator -->
  <div class="selection-border" *ngIf="node.isSelected"></div>
</div>